# OpenBack é¡¹ç›®å®Œæ•´æŒ‡å—

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

OpenBack æ˜¯ä¸€ä¸ªå®Œæ•´çš„é‡åŒ–äº¤æ˜“ç­–ç•¥ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«å‰ç«¯ç®¡ç†ç•Œé¢å’Œåç«¯APIæœåŠ¡ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
open-back/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ html/                    # Reactå‰ç«¯é¡¹ç›®
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/     # UIç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/          # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ router/         # è·¯ç”±é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ services/       # APIæœåŠ¡å±‚
â”‚   â”‚   â”‚   â””â”€â”€ constants/      # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ start_frontend.sh   # å‰ç«¯å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ server/                 # Pythonåç«¯é¡¹ç›®
â”‚       â”œâ”€â”€ routes/             # APIè·¯ç”±
â”‚       â”œâ”€â”€ main.py            # æœåŠ¡å™¨ä¸»æ–‡ä»¶
â”‚       â”œâ”€â”€ requirements.txt   # Pythonä¾èµ–
â”‚       â””â”€â”€ run.sh            # åç«¯å¯åŠ¨è„šæœ¬
â”œâ”€â”€ core/                      # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ config/               # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ mysql/                # æ•°æ®åº“è®¿é—®å±‚
â”œâ”€â”€ config/
â”‚   â””â”€â”€ default.yaml          # ç³»ç»Ÿé…ç½®æ–‡ä»¶
â””â”€â”€ PROJECT_GUIDE.md          # é¡¹ç›®æŒ‡å—
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### 1. å¯åŠ¨åç«¯æœåŠ¡å™¨

```bash
# è¿›å…¥åç«¯ç›®å½•
cd /Volumes/data/project/open-back/app/server

# å®‰è£…Pythonä¾èµ–
python3 -m pip install -r requirements.txt

# å¯åŠ¨æœåŠ¡å™¨
./run.sh
```

**åç«¯æœåŠ¡åœ°å€**: http://localhost:8081

### 2. å¯åŠ¨å‰ç«¯åº”ç”¨

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd /Volumes/data/project/open-back/app/html

# å®‰è£…Node.jsä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
./start_frontend.sh
```

**å‰ç«¯è®¿é—®åœ°å€**: http://localhost:3000

## ğŸ”§ æŠ€æœ¯æ ˆ

### åç«¯ (Python)
- **Flask 3.0.0** - Webæ¡†æ¶
- **PyMySQL 1.1.0** - MySQLæ•°æ®åº“è¿æ¥
- **Flask-CORS 6.0.1** - è·¨åŸŸæ”¯æŒ
- **PyYAML 6.0.1** - é…ç½®æ–‡ä»¶è§£æ

### å‰ç«¯ (React)
- **React 19.1.1** - å‰ç«¯æ¡†æ¶
- **TypeScript 4.9.5** - ç±»å‹å®‰å…¨
- **Ant Design** - UIç»„ä»¶åº“
- **React Router DOM** - è·¯ç”±ç®¡ç†

### æ•°æ®åº“
- **MySQL** - ä¸»æ•°æ®åº“
- **Strategyè¡¨** - å­˜å‚¨ç­–ç•¥æ•°æ®

## ğŸ“¡ API æ¥å£

### ç»Ÿä¸€APIæ ¼å¼

**è¯·æ±‚æ ¼å¼**:
```json
{
    "method": "æ–¹æ³•å",
    "data": {
        // å…·ä½“å‚æ•°
    }
}
```

**å“åº”æ ¼å¼**:
```json
{
    "success": true/false,
    "message": "é”™è¯¯ä¿¡æ¯ï¼ˆæˆåŠŸæ—¶ä¸ºç©ºï¼‰",
    "data": {
        // è¿”å›æ•°æ®
    }
}
```

### å¯ç”¨æ¥å£

1. **POST /test** - æµ‹è¯•æ¥å£
2. **POST /api** - ç»Ÿä¸€ä¸šåŠ¡API
   - `getStrategy` - è·å–ç­–ç•¥åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€æ’åºï¼‰

## âœ… CORS è·¨åŸŸæ”¯æŒ

å·²é…ç½®å®Œæ•´çš„CORSè·¨åŸŸæ”¯æŒï¼š
- âœ… å…è®¸æ‰€æœ‰åŸŸåè®¿é—® (`origins="*"`)
- âœ… æ”¯æŒæ‰€æœ‰HTTPæ–¹æ³• (GET, POST, PUT, DELETE, OPTIONS)
- âœ… å…è®¸å¸¸ç”¨è¯·æ±‚å¤´ (Content-Type, Authorizationç­‰)
- âœ… æ”¯æŒæºå¸¦å‡­è¯ (`supports_credentials=True`)

### éªŒè¯CORSåŠŸèƒ½

```bash
# æµ‹è¯•OPTIONSé¢„æ£€è¯·æ±‚
curl -X OPTIONS http://127.0.0.1:8081/api \
  -H "Origin: http://localhost:3000" \
  -H "Access-Control-Request-Method: POST" \
  -H "Access-Control-Request-Headers: Content-Type" \
  -v

# æµ‹è¯•å®é™…è·¨åŸŸè¯·æ±‚
curl -X POST http://127.0.0.1:8081/api \
  -H "Origin: http://localhost:3000" \
  -H "Content-Type: application/json" \
  -d '{"method": "getStrategy", "data": {"page": 1, "pageSize": 2}}' \
  -i
```

## ğŸ¨ å‰ç«¯ç•Œé¢

### ä¸»è¦é¡µé¢
1. **é¦–é¡µ** - Hello Worldæ¬¢è¿é¡µé¢ï¼ŒåŒ…å«ç³»ç»Ÿæ¦‚è§ˆ
2. **ç­–ç•¥ç®¡ç†** - ç­–ç•¥æ•°æ®å±•ç¤ºï¼ˆå¾…å®Œå–„ï¼‰
3. **ç³»ç»Ÿè®¾ç½®** - ç³»ç»Ÿé…ç½®ï¼ˆå¾…å®Œå–„ï¼‰

### UIç‰¹æ€§
- å“åº”å¼å¸ƒå±€ï¼Œæ”¯æŒç§»åŠ¨ç«¯
- ç°ä»£åŒ–è®¾è®¡é£æ ¼
- ä¸­æ–‡æœ¬åœ°åŒ–ç•Œé¢
- å¯æŠ˜å ä¾§è¾¹æ 
- ç”¨æˆ·å¤´åƒä¸‹æ‹‰èœå•

## ğŸ” å¼€å‘è°ƒè¯•

### åç«¯è°ƒè¯•
```bash
cd /Volumes/data/project/open-back/app/server
python3 test_database.py  # æµ‹è¯•æ•°æ®åº“è¿æ¥
python3 main.py          # ç›´æ¥å¯åŠ¨æœåŠ¡å™¨
```

### å‰ç«¯è°ƒè¯•
```bash
cd /Volumes/data/project/open-back/app/html
npm start                # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build           # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```

### è·¨åŸŸæµ‹è¯•
- ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹Networké¢æ¿
- æ£€æŸ¥å“åº”å¤´ä¸­çš„CORSç›¸å…³å­—æ®µ
- ä½¿ç”¨ `cors-test.html` é¡µé¢è¿›è¡ŒåŠŸèƒ½æµ‹è¯•

## ğŸŒ éƒ¨ç½²æŒ‡å—

### å¼€å‘ç¯å¢ƒ
- åç«¯ï¼šhttp://localhost:8081
- å‰ç«¯ï¼šhttp://localhost:3000

### ç”Ÿäº§ç¯å¢ƒ
1. **åç«¯éƒ¨ç½²**ï¼šå°†æ•´ä¸ªé¡¹ç›®ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œè¿è¡ŒPythonæœåŠ¡
2. **å‰ç«¯éƒ¨ç½²**ï¼šæ„å»ºåéƒ¨ç½²åˆ°é™æ€æ–‡ä»¶æœåŠ¡å™¨
3. **åå‘ä»£ç†**ï¼šé…ç½®Nginxç­‰ä»£ç†å‰åç«¯è¯·æ±‚

## ğŸ‰ é¡¹ç›®äº®ç‚¹

1. **å®Œæ•´çš„å‰åç«¯åˆ†ç¦»æ¶æ„**
2. **ç»Ÿä¸€çš„APIè®¾è®¡è§„èŒƒ**
3. **å®Œå–„çš„CORSè·¨åŸŸæ”¯æŒ**
4. **å¯ç§»æ¤çš„éƒ¨ç½²æ–¹æ¡ˆ**
5. **ç°ä»£åŒ–çš„æŠ€æœ¯æ ˆ**
6. **ç±»å‹å®‰å…¨çš„å¼€å‘ä½“éªŒ**
7. **ä¼ä¸šçº§UIè®¾è®¡**

ç°åœ¨ä½ æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ã€ç”Ÿäº§å°±ç»ªçš„é‡åŒ–äº¤æ˜“ç­–ç•¥ç®¡ç†ç³»ç»Ÿï¼
